<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üßü Zombie VS Player 3D - FPS Shooter</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Bangers&family=Russo+One&display=swap" rel="stylesheet">
    <!-- Three.js CDN -->
    <script async src="https://unpkg.com/es-module-shims@1.6.3/dist/es-module-shims.js"></script>
    <script type="importmap">
      {
        "imports": {
          "three": "https://unpkg.com/three@0.150.1/build/three.module.js",
          "three/addons/": "https://unpkg.com/three@0.150.1/examples/jsm/"
        }
      }
    </script>
</head>

<body>
    <!-- –ü—Ä–∏—Ü–µ–ª -->
    <div id="crosshair"></div>

    <!-- –ì–ª–∞–≤–Ω–æ–µ –ú–µ–Ω—é -->
    <div id="mainMenu" class="menu">
        <div class="menu-content">
            <h1 class="title">üßü ZOMBIE FPS 3D üî´</h1>
            <div class="subtitle">–ú—É–ª—å—Ç–∏–ø–ª–µ–µ—Ä –®—É—Ç–µ—Ä</div>

            <div class="input-group">
                <label for="playerName">–¢–≤–æ—ë –∏–º—è:</label>
                <input type="text" id="playerName" placeholder="–í–≤–µ–¥–∏ –∏–º—è..." maxlength="15">
            </div>

            <div class="menu-buttons">
                <button id="showServersBtn" class="menu-btn servers-btn">
                    <span>üåê –°–ï–†–í–ï–†–´</span>
                </button>
                <button id="createRoomBtn" class="menu-btn create-btn">
                    <span>‚ûï –°–û–ó–î–ê–¢–¨ –ö–û–ú–ù–ê–¢–£</span>
                </button>
                <button id="soloPlayBtn" class="menu-btn solo-btn">
                    <span>üéÆ –û–î–ò–ù–û–ß–ù–ê–Ø –ò–ì–†–ê</span>
                </button>
            </div>

            <div class="controls-info">
                <h3>üéØ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:</h3>
                <p><span class="key">W A S D</span> - –î–≤–∏–∂–µ–Ω–∏–µ</p>
                <p><span class="key">–ú–´–®–ö–ê</span> - –û–±–∑–æ—Ä –∏ –°—Ç—Ä–µ–ª—å–±–∞</p>
                <p><span class="key">SPACE</span> - –ü—Ä—ã–∂–æ–∫</p>
                <p><span class="key">R</span> - –ü–µ—Ä–µ–∑–∞—Ä—è–¥–∫–∞</p>
            </div>
        </div>
    </div>

    <!-- –ú–µ–Ω—é –°–µ—Ä–≤–µ—Ä–æ–≤ -->
    <div id="serverMenu" class="menu hidden">
        <div class="menu-content server-browser">
            <h2 class="server-title">üåê –°–ü–ò–°–û–ö –°–ï–†–í–ï–†–û–í</h2>

            <div class="server-list-container">
                <div id="serverList" class="server-list">
                    <div class="loading-servers">
                        <div class="spinner"></div>
                        <span>–ü–æ–∏—Å–∫ —Å–µ—Ä–≤–µ—Ä–æ–≤...</span>
                    </div>
                </div>
            </div>

            <div class="server-actions">
                <button id="refreshServersBtn" class="action-btn">
                    üîÑ –û–±–Ω–æ–≤–∏—Ç—å
                </button>
                <button id="backToMenuBtn" class="action-btn back-btn">
                    ‚¨ÖÔ∏è –ù–∞–∑–∞–¥
                </button>
            </div>

            <div class="manual-connect">
                <input type="text" id="serverAddress" placeholder="–ê–¥—Ä–µ—Å —Å–µ—Ä–≤–µ—Ä–∞ (IP:–ø–æ—Ä—Ç)">
                <button id="connectManualBtn" class="action-btn connect-btn">–ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è</button>
            </div>
        </div>
    </div>

    <!-- –õ–æ–±–±–∏ –ö–æ–º–Ω–∞—Ç—ã -->
    <div id="roomLobby" class="menu hidden">
        <div class="menu-content lobby-content">
            <h2 class="lobby-title">üè† –ö–û–ú–ù–ê–¢–ê: <span id="roomName">???</span></h2>

            <div class="room-code-display">
                <span>–ö–æ–¥ –∫–æ–º–Ω–∞—Ç—ã:</span>
                <div id="roomCode" class="room-code">XXXX</div>
                <button id="copyCodeBtn" class="copy-btn">üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
            </div>

            <div class="lobby-players">
                <h3>üë• –ò–≥—Ä–æ–∫–∏ –≤ –∫–æ–º–Ω–∞—Ç–µ:</h3>
                <ul id="lobbyPlayersList"></ul>
            </div>

            <div class="lobby-actions">
                <button id="startGameBtn" class="start-btn">
                    <span>üöÄ –ù–ê–ß–ê–¢–¨ –ò–ì–†–£!</span>
                </button>
                <button id="leaveLobbyBtn" class="action-btn back-btn">
                    ‚¨ÖÔ∏è –í—ã–π—Ç–∏
                </button>
            </div>
        </div>
    </div>

    <!-- –ò–≥—Ä–æ–≤–æ–π UI (HUD) -->
    <div id="gameUI" class="game-ui hidden">
        <div class="hud-top">
            <div class="stat-item kill-counter">
                <span class="stat-icon">üíÄ</span>
                <span id="killCount" class="stat-value">0</span>
            </div>
            <div class="stat-item wave-counter">
                <span class="stat-icon">üåä</span>
                <span class="stat-label">–í–û–õ–ù–ê</span>
                <span id="waveNumber" class="stat-value">1</span>
            </div>
            <div class="stat-item room-info-hud">
                <span class="stat-icon">üè†</span>
                <span id="currentRoomName">---</span>
            </div>
        </div>

        <div class="hud-bottom-left">
            <div class="health-bar-container">
                <div class="health-icon">‚ù§Ô∏è</div>
                <div class="health-bar-bg">
                    <div id="healthBarFill" class="health-bar-fill"></div>
                </div>
                <span id="healthText">100</span>
            </div>
        </div>

        <div class="hud-bottom-right">
            <div class="ammo-counter">
                <span class="ammo-icon">üî´</span>
                <span id="ammoCount" class="ammo-value">30</span>
                <span class="ammo-divider">/</span>
                <span class="ammo-max">‚àû</span>
            </div>
        </div>

        <div id="playersList" class="players-list">
            <h4>üë• –ò–≥—Ä–æ–∫–∏:</h4>
            <ul id="playersUL"></ul>
        </div>

        <!-- –°–æ–æ–±—â–µ–Ω–∏–µ –æ –ø–µ—Ä–µ–∑–∞—Ä—è–¥–∫–µ -->
        <div id="reloadMsg" class="reload-message hidden">–ü–ï–†–ï–ó–ê–†–Ø–î–ö–ê...</div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω Game Over -->
    <div id="gameOver" class="game-over hidden">
        <div class="game-over-content">
            <h1>üíÄ GAME OVER üíÄ</h1>
            <p>–¢—ã —É–±–∏–ª <span id="finalScore">0</span> –∑–æ–º–±–∏!</p>
            <p>–í–æ–ª–Ω–∞: <span id="finalWave">1</span></p>
            <button id="restartBtn" class="start-btn">üîÑ –ó–ê–ù–û–í–û</button>
            <button id="backToMenuFromGameOver" class="action-btn back-btn">üè† –í –ú–ï–ù–Æ</button>
        </div>
    </div>

    <!-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –Ω–æ–≤–æ–π –≤–æ–ª–Ω–µ -->
    <div id="waveAnnounce" class="wave-announce hidden">
        <span>üåä –í–û–õ–ù–ê <span id="waveAnnounceNum">1</span> üåä</span>
    </div>

    <!-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è -->
    <div id="notification" class="notification hidden"></div>

    <!-- –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∫–ª–∏–∫—É –¥–ª—è –∑–∞—Ö–≤–∞—Ç–∞ –º—ã—à–∏ -->
    <div id="clickToPlay" class="click-to-play hidden">
        <span>–ö–õ–ò–ö–ù–ò –ß–¢–û–ë–´ –ò–ì–†–ê–¢–¨</span>
    </div>

    <script type="module" src="game.js"></script>
</body>

</html>